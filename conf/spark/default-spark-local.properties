
###This is the configuration file for the PRIDE-Cluster Algorithm including all the features from mapper
### and reducers. It is a merge between both previous xml config files. It considerably reduce the complexity or having to files.

# Spark Config File

## MapReduce Compress Variables

spark.hadoop.mapred.output.compress=true
spark.hadoop.mapred.output.compression.codec=snappy

# Memory assigned to each task node JVM
mapred.child.java.opts = -Xmx6600m

# Compress type for mapper's output, change from RECORD to BLOCK to make it more efficient
mapred.output.compression.type = BLOCK

# Customize when reducers startup. A value of 1.00 will wait for all the mappers to finish. A value of 0.0 will start the reducers right away.
mapred.reduce.slowstart.completed.maps = 0.9

# The number of milliseconds before a task will be terminated if it neither reads an input, writes an output, nor updates its status string
mapred.task.timeout = 0

# Each mapper task has a circular memory that it writes the output to
io.sort.mb = 1000

# This property controls the maximum number of streams to merge at once, the default is 10
io.sort.factor = 100

# Whether to enable the JVM build-in profiler
mapred.task.profile = false

# Profiler configuration parameters
mapred.task.profile.params = -agentlib:hprof=cpu=samples,heap=sites,interval=20,depth=6,force=n,thread=n,verbose=n,file=%s

# The mapper tasks to be profiled
mapred.task.profile.maps = 0 

# The reducer tasks to be profiled
mapred.task.profile.reduces = 0

# PRIDE Cluster Variables

# Prefix for the final output of each clustering file
clustering.file.prefix= clusteringBin

# Initial Number of Peaks Filter
initial.highest.peak.filter = 70

# Filter cluster output to have minimum number of spectra
mini.number.spectra = 2


# If set to "true" the spectra are included in the .clustering file. This no
# This no longer works in the "spectraLess" versions of the algorithm were
# clustered spectra are no longer stored.
clustering.file.include.spectra = false

# Whether to remove empty peaks in consensus spectrum
remove.empty.peaks = true

# The number of reducers used for the job
mapred.reduce.tasks = 120

# Whether to compress mapper's output
mapred.compress.map.output = true


# Turn off the speculative execution to avoid running the same map tasks multiple times
mapred.map.tasks.speculative.execution = false

# Spectrum Checker
pride.cluster.similarity.checker = uk.ac.ebi.pride.spectracluster.similarity.CombinedFisherIntensityTest


pride.cluster.similarity.only_compare_n_highest_peaks = 1